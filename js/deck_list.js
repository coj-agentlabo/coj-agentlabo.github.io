"use strict";$(function(){function e(){v=new BulletinBoardClass(y),v.DisplayDialog()}function a(){v.ClickWantCardNormalButton()}function o(){v.ClickWantCardFoilButton()}function c(){v.ClickReleaseCardNormalButton()}function t(){v.ClickReleaseCardFoilButton()}function i(){v.clickDialogAcceptBtn()}function n(){v.clickDialogDeclineBtn()}function s(){m.CloseDialog()}function l(){var e=parseInt($(this).attr("data-value"),10);g=$("#card_detail_foil").hasClass("display_block"),null!=e&&0!==e&&($(this).hasClass("bt_virus")?(I=!0,D.cardDetailDialog(e,!1,!1,g,I)):(I=!1,D.cardDetailDialog(y,!0,!1,g,I)))}function r(){var e=$(this).attr("data-value");sessionStorage.cd=e,D.resetDialogInfo(),$("#common_popup_close").removeClass("display_none"),$("#popup_container").html("").html('<p class="tx_c">デッキを一時保存しました。</p>'),deviceInfo.isMobile&&$("body").addClass("popup"),$("#common_popup_wrapper").removeClass("display_none").addClass("display_block")}function d(){if(I){var e=parseInt($("#detail_virus_bt").attr("data-value"),10);D.expandCardImg(e,I,g)}else D.expandCardImg(y,I,!1)}function _(){D.changeFavorite(y)}function p(){var e=$(this),a=parseInt(e.attr("data-id"),10);D.jokerDetailDialog(a)}function u(){var e=$(this),a=!0,o=parseInt(e.attr("data-id"),10),c=parseInt(e.attr("data-favbtn"),10);I=!1,y=o,0==c&&(a=!1),D.cardDetailDialog(o,a)}function k(){I=!1,g=!1,$("#card_detail_wrapper").removeClass("display_block").addClass("display_none")}function f(){var e=$(this).attr("data-id");window.location.href="/deck_editor?id="+e}function C(){var e=$(this).attr("data-id");window.location.href="/deck_editor?id="+e+"&recipe=true"}function b(){for(var e=parseInt($(this).attr("data-id"),10),a=0,o=!1,c={1:0,2:0},t=[],i=0,n=0,s=userDeckInfo.length;n<s;n++)if(userDeckInfo[n].deckId===e){if(1===userDeckInfo[n].isSelected){o=!0;break}var l=JSON.parse(userDeckInfo[n].deckCopyData);c=l.j,t=l.c,i=userDeckInfo[n].updateDate;break}if(o)h='<p class="tx_c">既に選択されています。</p>',(new CommonDialogClass).DisplayDialog(h,{close:!0});else{var r={uk:uk,deckId:e,joker:{1:c[1],2:c[2]},card:t,isDicision:1,isSave:0,updateDate:i};$.ajax({url:"/save_deck",contentType:"application/json",dataType:"json",data:JSON.stringify(r),type:"POST",timeout:2e4,success:function(o,c,t){if(o.status!=constant.responseStatus.SUCCESS)return void D.error(o.status);for(var i=0,n=userDeckInfo.length;i<n;i++)1===userDeckInfo[i].isSelected&&(a=userDeckInfo[i].deckId,userDeckInfo[i].isSelected=0),userDeckInfo[i].deckId===e&&(userDeckInfo[i].isSelected=1);h='<p class="tx_c">デッキ'+e+"を使用デッキにしました。</p>",deviceInfo.isMobile?($("#deck_set_ic_sp","#deck_list_box"+e).removeClass("display_none").addClass("display_block"),$("#deck_set_ic_sp","#deck_list_box"+a).removeClass("display_block").addClass("display_none")):($("#deck_set_ic","#deck_list_box"+e).removeClass("display_none").addClass("display_block"),$("#deck_set_ic","#deck_list_box"+a).removeClass("display_block").addClass("display_none")),(new CommonDialogClass).DisplayDialog(h,{close:!0})},error:function(){D.error(constant.responseStatus.EXCEPTION_ERROR)}})}}var D=new commonClass,m=new CommonDialogClass,v=new BulletinBoardClass,I=!1,g=!1,y=0,h="";v.getOrderBoardInfo(),$.ajax({url:"/get_user_joker",dataType:"json",success:function(m){userFavCards=m.userFavCards,userJokerInfo=m.userJokerInfo,$(".bt_deck_editor").on("click",f),$("#card_detail_close_bt").on("click",k),$(".card_wrapper").on("click",u),$(".deck_joker").on("click",p),$("#detail_favo_bt").on("click",_),$(".bt_copy").on("click",r),$("#card_detail_image_container").on("click",d),$("#enlarge_close_bt").on("click",D.expandCardImgClose),$("#detail_virus_bt").on("click",l),$("#detail_order_board_bt").on("click",e),$("#order_board_popup_cancel").on("click",v.CloseDialog),$("#bt_order_board_popup_want_normal").on("click",a),$("#bt_order_board_popup_want_foil").on("click",o),$("#bt_order_board_popup_release_normal").on("click",c),$("#bt_order_board_popup_release_foil").on("click",t),$("#common_popup_accept").on("click",i),$("#common_popup_decline").on("click",n),$("#common_popup_close").on("click",s),$(".bt_recipe").on("click",C),$(".bt_deck_decision").on("click",b)},error:function(){}})});