"use strict";$(function(){function o(){switch(k){case M.CONFIRMATION_REQUEST:R(A.REQUEST);break;case M.CONFIRMATION_ACCEPT:R(A.ACCEPT);break;case M.CONFIRMATION_DENY:R(A.DENY);break;case M.CONFIRMATION_CANCEL:R(A.CANCEL);break;case M.CONFIRMATION_REMOVE:R(A.REMOVE)}}function a(){f=new BulletinBoardClass(w),f.DisplayDialog()}function e(){f.ClickWantCardNormalButton()}function n(){f.ClickWantCardFoilButton()}function c(){f.ClickReleaseCardNormalButton()}function t(){f.ClickReleaseCardFoilButton()}function s(){f.clickDialogAcceptBtn()}function i(){f.clickDialogDeclineBtn()}function l(){N.CloseDialog()}function _(){var o=$(this).attr("data-value");sessionStorage.cd=o,m.resetDialogInfo(),$("#common_popup_close").removeClass("display_none"),$("#popup_container").html("").html('<p class="tx_c">デッキを一時保存しました。</p>'),deviceInfo.isMobile&&$("body").addClass("popup"),$("#common_popup_wrapper").removeClass("display_none").addClass("display_block")}function p(){if(b){var o=parseInt($("#detail_virus_bt").attr("data-value"),10);m.expandCardImg(o,b,T)}else m.expandCardImg(w,!1,!1)}function r(){var o=$(this),a=parseInt(o.attr("data-id"),10);m.jokerDetailDialog(a)}function d(){var o=parseInt($(this).attr("data-value"),10);T=$("#card_detail_foil").hasClass("display_block"),null!=o&&0!==o&&($(this).hasClass("bt_virus")?(b=!0,m.cardDetailDialog(o,!1,!1,T,b)):(b=!1,m.cardDetailDialog(w,!1,!1,T,b)))}function C(){b=!1,T=!1,$("#card_detail_wrapper").removeClass("display_block").addClass("display_none")}function u(){k=M.CLOSE,deviceInfo.isMobile&&$("body").removeClass("popup"),$("#common_popup_wrapper").removeClass("display_block").addClass("display_none")}function E(){var o=$(this),a=parseInt(o.attr("data-id"),10);b=!1,w=a,m.cardDetailDialog(a,!1)}function R(o){var a="",e={uk:uk,reqType:o,targetUserId:v};$.ajax({url:"/accept_friend",contentType:"application/json",dataType:"json",data:JSON.stringify(e),type:"POST",timeout:2e4,success:function(e,n,c){if(e.status===constant.responseStatus.SUCCESS)return deviceInfo.isMobile&&$("body").removeClass("popup"),m.resetDialogInfo(),$("#popup_container").html(""),$("#common_popup_wrapper").removeClass("display_block").addClass("display_none"),void(o===A.REQUEST?$("#request_btn_container").fadeOut(function(){$("#cancel_btn_container").fadeIn()}):o===A.ACCEPT?$("#receive_btn_container").fadeOut(function(){$("#remove_btn_container").fadeIn()}):o===A.DENY?$("#receive_btn_container").fadeOut(function(){$("#request_btn_container").fadeIn()}):o===A.CANCEL?$("#cancel_btn_container").fadeOut(function(){$("#request_btn_container").fadeIn()}):o===A.REMOVE&&$("#remove_btn_container").fadeOut(function(){$("#request_btn_container").fadeIn()}));if(e.status===D.TARGET_GAME_LOGIN_ERROR)a='<p class="tx_c">対象のプレイヤーは現在ゲームにログイン中です。</p>';else if(e.status===D.MAX_FRIEND_ERROR)a='<p class="tx_c">フレンド人数が上限に達しています。</p>';else{if(e.status!==D.TARGET_MAX_FRIEND_ERROR)return void m.error(e.status);a='<p class="tx_c">対象のプレイヤーのフレンド人数が上限に達しています。</p>'}deviceInfo.isMobile&&$("body").addClass("popup"),m.resetDialogInfo(),$("#common_popup_close").removeClass("display_none"),$("#common_popup_wrapper").removeClass("display_none").addClass("display_block"),$("#popup_container").html("").html(a)},error:function(o,a,e){}})}function I(){deviceInfo.isMobile&&$("body").removeClass("popup"),m.resetDialogInfo(),$("#popup_container").html(""),$("#common_popup_wrapper").removeClass("display_block").addClass("display_none")}function O(){var o=String($(this).attr("data-value")),a="";switch(o){case A.REQUEST:k=M.CONFIRMATION_REQUEST,a='<p class="tx_c">以下のプレイヤーにフレンド申請してよろしいですか？</p>';break;case A.ACCEPT:k=M.CONFIRMATION_ACCEPT,a='<p class="tx_c">以下のプレイヤーからのフレンド申請を承認してよろしいですか？</p>';break;case A.DENY:k=M.CONFIRMATION_DENY,a='<p class="tx_c">以下のプレイヤーからのフレンド申請を拒否してよろしいですか？</p>';break;case A.CANCEL:k=M.CONFIRMATION_CANCEL,a='<p class="tx_c">以下のプレイヤーへのフレンド申請をキャンセルしてよろしいですか？</p>';break;case A.REMOVE:k=M.CONFIRMATION_REMOVE,a='<p class="tx_c">以下のプレイヤーをフレンド解除してよろしいですか？</p>'}a+='<p class="tx_c">'+h+"</p>",m.resetDialogInfo(),$("#common_popup_accept").removeClass("display_none"),$("#common_popup_decline").removeClass("display_none"),$("#popup_container").html("").html(a),deviceInfo.isMobile&&$("body").addClass("popup"),$("#common_popup_wrapper").removeClass("display_none").addClass("display_block")}var m=new commonClass,N=new CommonDialogClass,f=new BulletinBoardClass,b=!1,T=!1,A={REQUEST:"REQUEST",ACCEPT:"ACCEPT",DENY:"DENY",CANCEL:"CANCEL",REMOVE:"REMOVE"},k="",v="",M={CLOSE:"CLOSE",CONFIRMATION_REQUEST:"CONFIRMATION_REQUEST",CONFIRMATION_ACCEPT:"CONFIRMATION_ACCEPT",CONFIRMATION_DENY:"CONFIRMATION_DENY",CONFIRMATION_CANCEL:"CONFIRMATION_CANCEL",CONFIRMATION_REMOVE:"CONFIRMATION_REMOVE"},D={TARGET_GAME_LOGIN_ERROR:"TARGET_GAME_LOGIN_ERROR",MAX_FRIEND_ERROR:"MAX_FRIEND_ERROR",TARGET_MAX_FRIEND_ERROR:"TARGET_MAX_FRIEND_ERROR"},y={},F=[];f.getOrderBoardInfo(),F=location.search.substring(1).split("&");for(var g=0;F[g];g++){var S=F[g].split("=");y[S[0]]=S[1]}$.ajax({url:"/get_user_joker",dataType:"json",success:function(o,a,e){userJokerInfo=o.userJokerInfo},error:function(o,a,e){}}),"id"in y&&(v=y.id);var h=$("#profile_player_name").text();$(".bt_friend_ctl").on("click",O),$("#common_popup_accept").on("click",o),$("#common_popup_decline").on("click",I),$("#detail_order_board_bt").on("click",a),$("#order_board_popup_cancel").on("click",f.CloseDialog),$("#bt_order_board_popup_want_normal").on("click",e),$("#bt_order_board_popup_want_foil").on("click",n),$("#bt_order_board_popup_release_normal").on("click",c),$("#bt_order_board_popup_release_foil").on("click",t),$("#common_popup_accept").on("click",s),$("#common_popup_decline").on("click",i),$("#common_popup_close").on("click",l),$("#card_detail_close_bt").on("click",C),$(".card_wrapper").on("click",E),$(".deck_joker").on("click",r),$(".bt_copy").on("click",_),$("#common_popup_close").on("click",u),$("#card_detail_image_container").on("click",p),$("#enlarge_close_bt").on("click",m.expandCardImgClose),$("#detail_virus_bt").on("click",d);var w=0});