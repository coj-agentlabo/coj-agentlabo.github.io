"use strict";$(function(){function e(){var e=$(this).attr("data-value");window.location.href="/friend_player?id="+e}function a(){var e={uk:uk,region:""};e.region=$("#region_select").val(),$.ajax({url:"/get_place_list",contentType:"application/json",dataType:"json",data:JSON.stringify(e),type:"POST",timeout:2e4,success:function(e){var a="";a+='<option value="">--</option>';for(var l=0;l<e.placeList.length;l++){var s="";s='<option value="'+e.placeList[l].id+'">'+e.placeList[l].name+"</option>",a+=s}$("#places_select").html("").html(a)},error:function(){}})}function l(){var e="プレイヤー名を入力してください。",a="該当するプレイヤーが存在しません。",l="検索結果数が上限を超えています。条件を絞って検索してください。",t="",n=$("#search_player_name").val(),i=$("#agent_rank_select").val(),o=$("#region_select").val(),c=$("#places_select").val();if(""===n)t=e,$("#result").html(""),$("#search_player_result_text").html("").html(t),$("#result_text").removeClass("display_block").addClass("display_none"),$("#search_player_result_text").removeClass("display_none").addClass("display_block"),$("#search_player_result").removeClass("display_none").addClass("display_block");else{var _={uk:uk,playerName:"",agentRankRange:"",region:"",place:""};n&&(_.playerName=n),i&&(_.agentRankRange=i),o&&(_.region=o),c&&(_.place=c),$.ajax({url:"/search_player",contentType:"application/json",dataType:"json",data:JSON.stringify(_),type:"POST",timeout:2e4,success:function(e){if(e.status!==constant.responseStatus.SUCCESS)return void s.error(e.status);r=e.playerList,$("#result_text").removeClass("display_block").addClass("display_none"),$("#search_player_result").removeClass("display_none").addClass("display_block");var n="";if(0===r.length)t=a;else{t=r.length>=100?l:r.length+"件のプレイヤーが見つかりました。";for(var i=0;i<r.length;i++){var o='<div class="player_profile_content"><ul><li class="search_joker1 '+r[i].character[1]+'_img"></li><li class="search_joker2 '+r[i].character[2]+'_img"></li><li class="player_agent_rank" style="background: url(img/agent_rank/agent_rank_l_'+r[i].agentRank+'.png) no-repeat; background-size: 100%;">';r[i].level&&r[i].level>0&&(o+='<span id="rank_card_level&quot;" class="rank_card_level player_search_rank">'+r[i].level+"</span>"),o+='</li><li class="player_region">'+r[i].regionName+'</li><li class="player_player_name">'+r[i].playerName+'</li><li class="player_place"><span>'+r[i].placeName+'</span></li><li class="bt_player_info" data-value="'+r[i].id+'"></li></ul></div>',n+=o}}$("#search_player_result_text").html("").html(t),$("#result").html("").html(n),$("#result_text").removeClass("display_block").addClass("display_none"),$("#search_player_result_text").removeClass("display_none").addClass("display_block"),$("#search_player_result").removeClass("display_none").addClass("display_block")},error:function(){}})}}var s=new commonClass;$("#region_select").change(a),$("#search_bt").on("click",l),$("#result").on("click",".bt_player_info",e),deviceInfo.isMobile&&s.mobileBtnHover($("#search_bt"));var r=[]});